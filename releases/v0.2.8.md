# June 2025 (v0.2.8)

Welcome to the June 2025 update of **Mochi**. Inspired by Visual Studio Code's style, these notes highlight major improvements and discuss their impact.

## Go code generation with `mochi build`

You can now turn Mochi source into a native Go application:

```mochi
fun main() {
  print("Hello from Mochi!")
}
```

Running `./mochi build main.mochi -o hello` produces a `hello` binary. The generated Go code is covered by golden tests so compiler output remains stable. Using Go as a backend yields fast startup at the cost of requiring the Go toolchain for builds.

## Run Mochi via `npx`

Mochi is distributed on npm and can run with no local setup:

```bash
$ npx mochilang/mochi run examples/hello.mochi
Hello, Mochi!
```

This ephemeral install ensures the latest version but downloads the package each run. A new `make publish-npm` target keeps the package up to date.

## Built-in MCP server tools

We replaced the external `mcp-go` dependency with a lightweight server.

```bash
$ echo '1 + 2' | mochi_eval
3
```

The built-in tools, `mochi_eval` and `mochi_cheatsheet`, integrate easily with chat-based IDEs. They reduce external dependencies, but custom server features from `mcp-go` are not available.

## Faster interpreter and benchmarks

A tagged `Value` type speeds up interpreter operations:

```mochi
let start = now()
let sum = 0
for i in 0..1_000_000 {
  sum = sum + i
}
print(now() - start)
```

Benchmarks now compare Mochi against equivalent Go versions with the `bench` target. The runtime is quicker but uses slightly more memory per value.

## Diagnostics, testing, and bug fixes

Runtime errors are clearer. For example:

```mochi
let xs = [1, 2]
print(xs[5])
```

produces:

```
slice index 5 out of range (len=2)
```

Additional parser, type checker and interpreter tests catch regressions. The extra checks have a small performance cost but greatly improve usability.
