// Generated by Mochi TypeScript compiler

function main(): void {
	type Sensor = {
		id: any;
		temperature: any;
	}
	
	const sensorStream = new Stream("Sensor")
	function _handler_0(ev: Sensor): void {
		const s = ev
		console.log(s.id, s.temperature)
	}
	sensorStream.register(_handler_0)
	sensorStream.append({id: "sensor-1", temperature: 22.500000})
}
main()

class Stream {
  name: string;
  handlers: Array<(data: any) => void> = [];
  constructor(name: string) {
    this.name = name;
  }
  append(data: any): any {
    for (const h of [...this.handlers]) {
      h(data);
    }
    return data;
  }
  register(handler: (data: any) => void): void {
    this.handlers.push(handler);
  }
}

